{% extends 'base/main.html' %}
{% load custom_filters %}
{% block css_content %}
{% load static %}
<link rel="stylesheet" href="{% static 'product/product_details.css' %}?v={{time}}">
{% comment %} <link rel="stylesheet" href="{% static 'product/product_carousel.css' %}?v={{time}}"> {% endcomment %}
<link rel="stylesheet" href="{% static 'product/prod_car.css' %}">
{% comment %} <link rel="stylesheet" href="{% static 'product/  .css' %}"> {% endcomment %}
{% comment %} <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans"> {% endcomment %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=arrow_back" />

{% endblock css_content %}

{% block content %}
<canvas id="myPieChart"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const ctx = document.getElementById('myPieChart').getContext('2d');
                
                const myPieChart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: ['Holidays : {{holidays_count}}',
                         'Absent : {{attendance_absent_count}}', 
                         'Present : {{attendance_present_count}}'],
                        datasets: [{
                            label: 'Attendance Overview',
                            data: [{{ holidays_count }}, {{ attendance_absent_count }}, {{ attendance_present_count }}],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.7)',
                                'rgb(255, 60, 65)',
                                'rgb(76, 181, 254)',                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            tooltip: {
                                enabled: true,
                            }
                        }
                    }
                });
            });
        </script>
{% endblock %}