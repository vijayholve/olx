

{% for  in  %}
    
{% endfor %}
    
<form method="POST">
    {% csrf_token %}
    {{ plan_form.as_p }}
    
    <h3>Features</h3>
    {{ formset.management_form }}
    <div>
        {% for form in formset %}
            <div class="form-row">
                {{ form.as_p }}
                <button type="button" class="delete-btn" onclick="deleteFeatureForm(this)">Delete</button>
            </div>
        {% endfor %}
    </div>
    
    <button type="submit">Save Plan</button>
</form>

<script>
    function deleteFeatureForm(button) {
        // Hide the feature form when delete is clicked
        const formRow = button.closest('.form-row');
        formRow.querySelector('input[name$="-DELETE"]').value = "on"; // Mark form for deletion
        formRow.style.display = "none"; // Hide form visually
    }
</script>
