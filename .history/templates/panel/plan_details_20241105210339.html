{% extends 'base/main.html' %}

{% load static %}
{% block css_content %}
    <link rel="stylesheet" href="{% static 'panel/plan_details.css' %}">
{% endblock css_content %}

{% block content %}

<div class="filter-container">
    <h2>Filter Plans</h2>
    <select id="planFilter" name="planFilter" onchange="filterPlans()">
        <option value="">All Plans</option>
        <option value="basic">Basic</option>
        <option value="premium">Premium</option>
        <option value="enterprise">Enterprise</option>
    </select>
</div>

<div class="plan-list">
    <h2>Available Plans</h2>
    <a href="{% url 'create_plan' %}" class="btn create-plan">Create New Plan</a>
    {% for plan in plans %}
    <div class="plan-card" data-type="{{ plan.plan_type }}">
        <h3>{{ plan.name }}</h3>
        <p class="plan-type">{{ plan.plan_type }}</p>
        <p class="price">${{ plan.price }}</p>
        
        <ul class="features">
            {% for feature in plan.planfeature_set.all %}
                <li>
                    {% if feature.included %}
                        <span class="check">&#10004;</span>
                    {% else %}
                        <span class="cross">&#10008;</span>
                    {% endif %}
                    {{ feature.feature.name }}
                </li>
            {% endfor %}
        </ul>
        
        <div class="action-buttons">
            <a href="{% url 'update_plan' plan.id %}" class="btn update">Update</a>
            <form action="{% url 'delete_plan' plan.id %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn delete" onclick="return confirm('Are you sure you want to delete this plan?');">Delete</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}
